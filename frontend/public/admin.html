<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Админ панел - Stone Craft</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/admin.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body data-page="admin">
  <header class="header" id="header">
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo" aria-label="Начало">
          <h1>Stone Craft</h1>
          <span>Админ панел</span>
        </a>
        <nav class="nav" id="nav">
          <ul class="nav-list">
            <li><a href="index.html" class="nav-link">Начало</a></li>
            <li><a href="catalog.html" class="nav-link">Каталог</a></li>
            <li><a href="admin.html" class="nav-link">Админ</a></li>
          </ul>
        </nav>
        <button id="logoutBtn" class="btn btn-secondary" style="margin-left:auto">Изход</button>
        <button class="burger-menu" id="burgerMenu" aria-label="Отвори меню">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
  </header>

  <main style="margin-top: 100px;">
    <section class="container" style="margin-top: 2rem;">
      <div style="display:flex; align-items:center; gap:1rem; justify-content:space-between; flex-wrap:wrap; margin-bottom:1rem;">
        <h2 style="margin:0;">Добави продукт</h2>
        <div style="display:flex; gap:.5rem;">
          <button id="showAddFormBtn" class="btn btn-primary" type="button" style="background:#2c3e50; color:white; padding:12px 24px; border:none; border-radius:5px; cursor:pointer; font-weight:600;">Добави продукт</button>
        </div>
      </div>
      <form id="productForm" class="admin-form" style="display:none; grid-template-columns:1fr; gap:1rem; max-width:640px; margin-top:1rem;">
        <div>
          <label for="name">Име</label>
          <input id="name" name="name" type="text" placeholder="Име на продукта" required />
        </div>
        <div>
          <label for="description">Описание</label>
          <textarea id="description" name="description" rows="3" placeholder="Кратко описание"></textarea>
        </div>
        <div>
          <label for="price">Цена (лв.)</label>
          <input id="price" name="price" type="number" step="0.01" min="0" placeholder="0.00" required />
        </div>
        <div>
          <label for="category">Категория</label>
          <select id="category" name="category" required>
            <option value="1">Мрамор</option>
            <option value="2">Гранит</option>
            <option value="3">Триплекс</option>
          </select>
        </div>
        <div>
          <label for="images">Снимки (по избор)</label>
          <input id="images" name="images" type="file" accept="image/png, image/jpeg, image/webp, image/gif" multiple>
          <small style="display:block; color:#666; margin-top:.25rem;">Поддържани формати: JPG, PNG, WEBP, GIF. Максимум 20MB на файл. Можете да изберете няколко снимки наведнъж.</small>
          
          <!-- Existing images (shown during edit) -->
          <div id="existingImages" style="display:none; margin-top:0.5rem;">
            <label style="font-size:0.9rem; color:#666; margin-bottom:0.25rem; display:block;">Съществуващи снимки:</label>
            <div id="existingImagesList" style="display:flex; gap:0.5rem; flex-wrap:wrap;"></div>
          </div>
          
          <!-- New images preview -->
          <div id="newImagesSection" style="margin-top:0.5rem;">
            <label id="newImagesLabel" style="font-size:0.9rem; color:#666; margin-bottom:0.25rem; display:none;">Нови снимки:</label>
            <div id="imagePreview" style="display:flex; gap:0.5rem; flex-wrap:wrap;"></div>
          </div>
        </div>
        <div style="display:flex; gap:.75rem; align-items:center;">
          <button type="submit" class="btn btn-primary">Запази</button>
          <button id="cancelFormBtn" type="button" class="btn btn-secondary">Отказ</button>
          <span id="formStatus" aria-live="polite"></span>
        </div>
      </form>
    </section>

    <section class="container" style="margin-top: 3rem;">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap;">
        <h2 id="productsHeader">Продукти</h2>
        <div>
          <label for="filterCategory" style="margin-right:.5rem;">Категория:</label>
          <select id="filterCategory">
            <option value="">Всички</option>
            <option value="1">Мрамор</option>
            <option value="2">Гранит</option>
            <option value="3">Триплекс</option>
          </select>
        </div>
      </div>
      <div id="adminProducts" class="products-grid" style="margin-top:1rem;"></div>
    </section>
  </main>

  <footer class="footer" style="margin-top: 3rem;">
    <div class="container">
      <div class="footer-bottom">
        <p>2025 SmartCodeSolutions. Всички права запазени</p>
      </div>
    </div>
  </footer>

  <script src="scripts/main.js"></script>
  <script src="scripts/admin.js"></script>
</body>
</html>
